k::
process, close, wot.exe
return

;REMOTE SCRIPT START
dllcall("LoadLibraryW", str, g_.cfg.injector_dir "\vlc\libvlccore.dll")
dllcall("LoadLibraryW", str, g_.cfg.injector_dir "\vlc\libvlc.dll")


AltCreateFileW(p1, p2, p3, p4, p5, p6, p7)
{
	static block   := 1 
	file           := strget(p1, "UTF-16")
	if instr(file, ".mov") ;and !  instr(FILE, "intro")
	{
		Winclose, Curtain 
	}		
	
	if instr(file, ".mov") and block
	{
		logerr("Skiped " file)
		block := false
		err := 1
		while (err)
		{
			r    := dllcall("peixoto.dll\VlcDDrawPlay", ptr, 0, ptr, g_.proxies.FMVr[], astr, file, astr) 
			err  := ErrorLevel
			code := strsplit(r, "failed")[2]
			logerr("Vlc " r "..." code " " ddraw.err[code . ""] errorlevel)			
		}
		block := true
		return -1					
	}	
	r := dllcall(g_fhks.pCreateFileW, uint, p1, uint, p2, uint, p3, uint, p4, uint, p5, uint, p6, uint, p7)		
	return r
}

